// Generated by CoffeeScript 1.6.3
var ColorConverter;

ColorConverter = (function() {
  function ColorConverter(from, to) {
    this.from = from != null ? from : "#428bca";
    this.to = to != null ? to : "#b94a48";
  }

  ColorConverter.prototype.toColor = function(val, min, max) {
    var graF, normalized, rate;
    graF = gra_hexcolor(this.from, this.to);
    if (val < min) {
      rate = min;
    }
    if (val > max) {
      rate = max;
    }
    normalized = (val - min) / (max - min);
    return graF(normalized);
  };

  ColorConverter.prototype.rateToColor = function(val) {
    return this.toColor(val, 1200, 1800);
  };

  ColorConverter.prototype.battleNumToColor = function(val) {
    return this.toColor(val, 0, 180);
  };

  ColorConverter.prototype.scoreToColor = function(val) {
    return this.toColor(val, 0, 50000);
  };

  return ColorConverter;

})();

window.onload = function() {
  var converter, moveToBattlePage, selector;
  selector = new ProgramSelector();
  moveToBattlePage = function(playerId, enemyId) {
    return location.href = getRoot() + "combats/matching/" + playerId + "/" + enemyId;
  };
  $('.program-row').click(function() {
    var _this = this;
    return selector.modal({
      buttons: [
        {
          type: "success",
          text: "Select",
          handler: function(data) {
            return moveToBattlePage(data.id, $(_this).attr('program-id'));
          }
        }
      ]
    });
  });
  converter = new ColorConverter("#428bca", "#b94a48");
  $.each($('.rate'), function() {
    return $(this).css('color', converter.rateToColor($(this).text()));
  });
  $.each($('.battle_num'), function() {
    return $(this).css('color', converter.battleNumToColor($(this).text()));
  });
  return $.each($('.score_average'), function() {
    return $(this).css('color', converter.scoreToColor($(this).text()));
  });
};
