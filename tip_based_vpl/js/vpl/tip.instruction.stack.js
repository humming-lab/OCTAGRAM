// Generated by CoffeeScript 1.6.2
var StackAddInstruction, StackBnzInstruction, StackDivInstruction, StackDupInstruction, StackGrtInstruction, StackMachine, StackModInstruction, StackMulInstruction, StackNotInstruction, StackRotInstruction, StackSubInstruction, StackSwapInstruction, StackXorInstruction,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

StackMachine = (function() {
  function StackMachine() {
    this.stack = [];
  }

  StackMachine.prototype.pop = function() {
    return this.stack.pop();
  };

  StackMachine.prototype.push = function(val) {
    return this.stack.push(val);
  };

  StackMachine.prototype.binaryOp = function(op) {
    if (this.stack.length > 1) {
      return this.push(op(this.pop(), this.pop()));
    }
  };

  StackMachine.prototype.unaryOp = function(op) {
    if (this.stack.length > 0) {
      return this.push(op(this.pop()));
    }
  };

  StackMachine.prototype.add = function() {
    return this.binaryOp(function(y, x) {
      return x + y;
    });
  };

  StackMachine.prototype.sub = function() {
    return this.binaryOp(function(y, x) {
      return x - y;
    });
  };

  StackMachine.prototype.mul = function() {
    return this.binaryOp(function(y, x) {
      return x * y;
    });
  };

  StackMachine.prototype.div = function() {
    return this.binaryOp(function(y, x) {
      return x / y;
    });
  };

  StackMachine.prototype.mod = function() {
    return this.binaryOp(function(y, x) {
      return x % y;
    });
  };

  StackMachine.prototype.xor = function() {
    return this.binaryOp(function(y, x) {
      return x ^ y;
    });
  };

  StackMachine.prototype.grt = function() {
    return this.binaryOp(function(y, x) {
      if (x > y) {
        return 1;
      } else {
        return 0;
      }
    });
  };

  StackMachine.prototype.swap = function() {
    var x, y;

    if (this.stack.length > 1) {
      x = this.pop();
      y = this.pop();
      this.push(y);
      return this.push(x);
    }
  };

  StackMachine.prototype.not = function() {
    return this.unaryOp(this.stack.pop() === 0 ? 1 : 0);
  };

  StackMachine.prototype.dup = function() {
    var val;

    if (this.stack.length > 0) {
      val = this.pop();
      this.push(val);
      return this.push(val);
    }
  };

  StackMachine.prototype.rot = function() {
    var x, y, z;

    if (this.stack.length > 3) {
      x = this.pop();
      y = this.pop();
      z = this.pop();
      this.push(y);
      this.push(z);
      return this.push(x);
    }
  };

  StackMachine.prototype.bnz = function() {
    if (this.stack != null) {
      return this.pop() !== 0;
    } else {
      return false;
    }
  };

  StackMachine.prototype.input = function() {
    return this.push(window.prompt());
  };

  StackMachine.prototype.toString = function() {
    var str;

    str = "";
    while (this.stack != null) {
      str += String.fromCharCode(this.pop());
    }
    return str;
  };

  return StackMachine;

})();

StackAddInstruction = (function(_super) {
  __extends(StackAddInstruction, _super);

  function StackAddInstruction(stack) {
    this.stack = stack;
  }

  StackAddInstruction.prototype.action = function() {
    return this.stack.add();
  };

  StackAddInstruction.prototype.clone = function() {
    return new StackAddInstruction(this.stack);
  };

  return StackAddInstruction;

})(ActionInstruction);

StackSubInstruction = (function(_super) {
  __extends(StackSubInstruction, _super);

  function StackSubInstruction(stack) {
    this.stack = stack;
  }

  StackSubInstruction.prototype.action = function() {
    return this.stack.sub();
  };

  StackSubInstruction.prototype.clone = function() {
    return new StackSubInstruction(this.stack);
  };

  return StackSubInstruction;

})(ActionInstruction);

StackMulInstruction = (function(_super) {
  __extends(StackMulInstruction, _super);

  function StackMulInstruction(stack) {
    this.stack = stack;
  }

  StackMulInstruction.prototype.action = function() {
    return this.stack.mul();
  };

  StackMulInstruction.prototype.clone = function() {
    return new StackMulInstruction(this.stack);
  };

  return StackMulInstruction;

})(ActionInstruction);

StackDivInstruction = (function(_super) {
  __extends(StackDivInstruction, _super);

  function StackDivInstruction(stack) {
    this.stack = stack;
  }

  StackDivInstruction.prototype.action = function() {
    return this.stack.div();
  };

  StackDivInstruction.prototype.clone = function() {
    return new StackDivInstruction(this.stack);
  };

  return StackDivInstruction;

})(ActionInstruction);

StackModInstruction = (function(_super) {
  __extends(StackModInstruction, _super);

  function StackModInstruction(stack) {
    this.stack = stack;
  }

  StackModInstruction.prototype.action = function() {
    return this.stack.mod();
  };

  StackModInstruction.prototype.clone = function() {
    return new StackModInstruction(this.stack);
  };

  return StackModInstruction;

})(ActionInstruction);

StackXorInstruction = (function(_super) {
  __extends(StackXorInstruction, _super);

  function StackXorInstruction(stack) {
    this.stack = stack;
  }

  StackXorInstruction.prototype.action = function() {
    return this.stack.xor();
  };

  StackXorInstruction.prototype.clone = function() {
    return new StackXorInstruction(this.stack);
  };

  return StackXorInstruction;

})(ActionInstruction);

StackGrtInstruction = (function(_super) {
  __extends(StackGrtInstruction, _super);

  function StackGrtInstruction(stack) {
    this.stack = stack;
  }

  StackGrtInstruction.prototype.action = function() {
    return this.stack.grt();
  };

  StackGrtInstruction.prototype.clone = function() {
    return new StackGrtInstruction(this.stack);
  };

  return StackGrtInstruction;

})(ActionInstruction);

StackSwapInstruction = (function(_super) {
  __extends(StackSwapInstruction, _super);

  function StackSwapInstruction(stack) {
    this.stack = stack;
  }

  StackSwapInstruction.prototype.action = function() {
    return this.stack.swap();
  };

  StackSwapInstruction.prototype.clone = function() {
    return new StackSwapInstruction(this.stack);
  };

  return StackSwapInstruction;

})(ActionInstruction);

StackNotInstruction = (function(_super) {
  __extends(StackNotInstruction, _super);

  function StackNotInstruction(stack) {
    this.stack = stack;
  }

  StackNotInstruction.prototype.action = function() {
    return this.stack.not();
  };

  StackNotInstruction.prototype.clone = function() {
    return new StackNotInstruction(this.stack);
  };

  return StackNotInstruction;

})(ActionInstruction);

StackDupInstruction = (function(_super) {
  __extends(StackDupInstruction, _super);

  function StackDupInstruction(stack) {
    this.stack = stack;
  }

  StackDupInstruction.prototype.action = function() {
    return this.stack.dup();
  };

  StackDupInstruction.prototype.clone = function() {
    return new StackDupInstruction(this.stack);
  };

  return StackDupInstruction;

})(ActionInstruction);

StackRotInstruction = (function(_super) {
  __extends(StackRotInstruction, _super);

  function StackRotInstruction(stack) {
    this.stack = stack;
  }

  StackRotInstruction.prototype.action = function() {
    return this.stack.rot();
  };

  StackRotInstruction.prototype.clone = function() {
    return new StackRotInstruction(this.stack);
  };

  return StackRotInstruction;

})(ActionInstruction);

StackBnzInstruction = (function(_super) {
  __extends(StackBnzInstruction, _super);

  function StackBnzInstruction(stack) {
    this.stack = stack;
  }

  StackBnzInstruction.prototype.action = function() {
    return this.stack.bnz();
  };

  StackBnzInstruction.prototype.clone = function() {
    return new StackBnzInstruction(this.stack);
  };

  return StackBnzInstruction;

})(BranchInstruction);
