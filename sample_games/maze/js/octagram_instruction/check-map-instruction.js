// Generated by CoffeeScript 1.6.3
var CheckMapInstruction,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

CheckMapInstruction = (function(_super) {
  __extends(CheckMapInstruction, _super);

  /*
     CheckMap Instruction
  */


  function CheckMapInstruction(player) {
    var column, labels;
    this.player = player;
    CheckMapInstruction.__super__.constructor.apply(this, arguments);
    column = "回転方向";
    labels = ["前", "右", "左"];
    this.directParam = new TipParameter(column, 0, 0, 2, 1);
    this.directParam.id = "direct";
    this.addParameter(this.directParam);
    this.tipInfo = new TipInfo(function(labels) {
      return "" + labels[0] + "に進めるなら青い矢印に進みます。そうでなければ赤い矢印に進みます。";
    });
    this.tipInfo.addParameter(this.directParam.id, column, labels, 0);
    this.icon = new Icon(Game.instance.assets[R.TIP.SEARCH_BARRIER], 32, 32);
  }

  CheckMapInstruction.prototype.action = function() {
    var ret;
    ret = false;
    if (this.directParam.value === 0) {
      ret = this.player.canMove(Direction.UP);
    } else if (this.directParam.value === 1) {
      ret = this.player.canMove(Direction.RIGHT);
    } else if (this.directParam.value === 2) {
      ret = this.player.canMove(Direction.LEFT);
    }
    return ret;
  };

  CheckMapInstruction.prototype.clone = function() {
    var obj;
    obj = this.copy(new CheckMapInstruction(this.player));
    obj.directParam = this.directParam;
    return obj;
  };

  CheckMapInstruction.prototype.onParameterChanged = function(parameter) {
    if (parameter.id === this.directParam.id) {
      this.directParam = parameter;
    }
    return this.tipInfo.changeLabel(parameter.id, parameter.value);
  };

  CheckMapInstruction.prototype.mkDescription = function() {
    return this.tipInfo.getDescription();
  };

  CheckMapInstruction.prototype.mkLabel = function(parameter) {
    return this.tipInfo.getLabel(parameter.id);
  };

  CheckMapInstruction.prototype.getIcon = function() {
    this.icon.frame = 0;
    return this.icon;
  };

  return CheckMapInstruction;

})(BranchInstruction);
