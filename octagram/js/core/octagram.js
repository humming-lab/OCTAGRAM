// Generated by CoffeeScript 1.6.3
var Octagram;

Octagram = (function() {
  Octagram.CONTENT_HTML = "content.html";

  Octagram.CONTENT_DEBUG_HTML = "content-debug.html";

  function Octagram(path) {
    var $octagramContent, $target, contentWindow,
      _this = this;
    this.core = null;
    $octagramContent = $('<iframe seamless></iframe>').attr({
      id: 'octagram-content',
      src: path + ("/" + Octagram.CONTENT_HTML)
    }).css({
      width: '640px',
      height: '640px'
    });
    $target = $('#octagram');
    $target.css({
      width: '640px',
      height: '640px'
    });
    $target.append($octagramContent);
    contentWindow = $octagramContent[0].contentWindow;
    contentWindow.isContent = true;
    contentWindow.onload = function() {
      _this.core = new contentWindow.OctagramCore(16, 16, 640, 640, "./resource/");
      _this.core.start();
      return _this.core.onload = function() {
        var scene;
        scene = new contentWindow.Scene(_this.core);
        _this.core.pushScene(scene);
        return _this.onload();
      };
    };
  }

  Octagram.prototype.createProgramInstance = function() {
    return this.core.octagrams.createInstance();
  };

  Octagram.prototype.showProgram = function(program) {
    return this.core.octagrams.show(program);
  };

  Octagram.prototype.getInstance = function(id) {
    return this.core.octagrams.getInstance(id);
  };

  Octagram.prototype.getCurrentInstance = function() {
    return this.core.octagrams.getCurrentInstance();
  };

  Octagram.prototype.onload = function() {};

  return Octagram;

})();

octagram.Octagram = Octagram;
